<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Review Your Most Accurate Chess Games</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="favicon.png">
</head>
<body>
  <main>
    <h1>Review Your Most Accurate Chess Games</h1>
    <p>Here are the most accurate {{ .TimeControl }} {{ .TimeControlCharacter }} games for <a href="https://lichess.org/@/{{ .Username }}">{{ .Username }}</a> ranked by average centipawn loss.</p>

    {{ if .Message }}
    <p class="message">{{ .Message }}</p>
    {{ end }}

    <table>
      {{ $root := . }}
      {{ range .Results }}
      <tr data-href="{{ .URL }}">
        <td class="rank-cell" style="width: 10%"><div class="badge">{{ .Rank }}</div></td>
        <td style="width: 30%">
          <div class="acpl">{{ printf "%.0f" .ACPL }} ACPL</div>
          <div class="date">{{ .FormattedDate }}</div>
          <div class="moves">{{ .Moves }} moves</div>
        </td>
        <td style="width: 60%">
          <div class="result-card">
            <div class="result-row"><div><div class="result-row--white-square"></div><div class="result-row--player">{{ .White }} ({{ .WhiteElo }})</div></div><div class="result-row--result {{ if and (eq .ResultWhite "1") (eq $root.Username .White) }}winner{{ end }} {{ if and (eq .ResultWhite "0") (eq $root.Username .White) }}loser{{ end }}">{{ .ResultWhite }}</div></div>
            <div class="result-row"><div><div class="result-row--black-square"></div><div class="result-row--player">{{ .Black }} ({{ .BlackElo }})</div></div><div class="result-row--result {{ if and (eq .ResultBlack "1") (eq $root.Username .Black) }}winner{{ end }} {{ if and (eq .ResultBlack "0") (eq $root.Username .Black) }}loser{{ end }}">{{ .ResultBlack }}</div></div>
          </div>
          <div class="opening">{{ .Opening }}</div>
        </td>
      </tr>
      {{ end }}
    </table>

    <script>
      document.querySelectorAll("tr[data-href]").forEach(row => {
        row.addEventListener("click", () => {
          window.open(row.getAttribute("data-href"), "_blank")
        })
      })
    </script>

    <a class="back-button" href="/">‚Üê Go back</a>
  </main>
</body>
</html>
